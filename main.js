(()=>{var d=class{constructor(e){this.pos=[0,0],this.speed=[0,0],this.startPos=[],this.endPos=[],this.distance=0,this.acc=e}setEndPos(e,t){this.moveTo(e,t)}setStartPos(e,t){this.startPos=[e,t]}getNewPos(e,t){return Math.round((e+t)*1e12)/1e12}update(){this.pos=[Math.trunc(this.counter[0]),Math.trunc(this.counter[1])];let e=this.getNewPos(this.counter[0],this.speed[0]),t=this.getNewPos(this.counter[1],this.speed[1]);this.pos[0]==this.eX||this.pos[1]==this.eY?this.counter=[this.startPos[0],this.startPos[1]]:this.counter=[e,t]}render(){this.counter||(this.counter=[this.startPos[0],this.startPos[1]]),this.update()}moveTo(e,t){let s=e-this.startPos[0],r=t-this.startPos[1];this.eX=e,this.eY=t;let i=Math.sqrt(s*s+r*r);isNaN(i)||(this.distance=i);let n=s/i,a=r/i;this.speed=[n*this.acc,a*this.acc]}},w=d;var p=class{constructor(e,t){this.canva=t,this.spriteArr=e,this.sprite=[]}init(e,t,s,r){this.type=s;for(let i=0;i<8;i++){this.sprite.push([]);for(let n=0;n<8;n++){let a=new w(r);a.setStartPos(i+e[0],n+e[1]),a.setEndPos(i+t[0],n+t[1]),this.sprite[i].push(a)}}}setArr(e){for(let t=0;t<8;t++)for(let s=0;s<8;s++){let r=this.sprite[t][s];r.cssClass=e[t][s]?e[t][s]==2?"active":`active__${this.type}`:"none"}return this.sprite}render(e){let t=this.canva.size,s=this.setArr(this.spriteArr[e]);for(let r of s)for(let i of r)i.render(),i.pos[0]<t&&i.pos[1]<t&&i.pos[0]>=0&&i.pos[1]>=0&&(i.cssClass=="active"||i.cssClass==`active__${this.type}`)&&(this.canva.raws[i.pos[0]][i.pos[1]].className=`${i.cssClass}`)}},y=p;var u=class{constructor(e,t,s){this.canva=e,this.active=0,this.timeA=0,this.startPosYX=t,this.endPosYX=s,this.pos=[0,0],this.indexG=0,this.gfxd0=[[0,1,0,0,0,0,1,0],[0,1,0,1,1,0,1,0],[0,0,1,2,2,1,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,0,0,1,1,0],[0,1,1,0,0,0,0,0]],this.gfxd1=[[1,0,0,0,0,0,0,1],[0,1,0,1,1,0,1,0],[0,0,1,1,1,1,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,1,1,1,1,0,0],[0,1,1,0,0,1,0,0],[0,0,0,0,0,1,1,0]],this.sprites=[[...this.gfxd0],[...this.gfxd1]]}init(e,t,s){this.flag=s,this.speed=t,this.type=e,this.sprite=new y(this.sprites,this.canva),this.sprite.init(this.startPosYX,this.endPosYX,this.type,this.speed),this.circle=this.circleTiles()}circleTiles(){let e=h=>2*Math.PI*h/12,t=[],s=[],r=[],i,n,a=this.sprite.sprite[0];this.active?(i=a[0].pos[0],n=a[0].pos[1]):(i=a[1].pos[0],n=a[1].pos[1]);for(let h=1;h<=16;h++)t[h]=(i+2*Math.cos(e(h))).toFixed(0),s[h]=(n+2*Math.sin(e(h))).toFixed(0),this.canva.raws[t[h]]&&this.canva.raws[t[h]][s[h]]&&r.push(this.canva.raws[t[h]][s[h]]);return r}render(){if(this.flag&&(this.circle=this.circleTiles(),this.circle&&this.circle[Math.trunc(this.indexG)])){for(let e of this.circle)e.className="active__banner";this.circle[Math.trunc(this.indexG)].className="active__enemy",this.indexG=this.indexG+64/1e3,this.indexG>this.circle.length-1&&(this.indexG=0)}new Date().getSeconds()<=this.timeA&&this.sprite.render(this.active),new Date().getSeconds()!=this.timeA&&(this.active==0?this.active=1:this.active=0,this.timeA=new Date().getSeconds())}},c=u;var f=class{constructor(e){this.canva=e,this.text="Banner",this.txtDots=[],this.frames=0,this.font=new FontFace("myFont","url(assets/fonts/Barlow/Barlow-Light.ttf)")}init(e,t){this.speed=t,this.type=e,this.generate("BUG!!!  Call the doc!")}generate(e){let t=document.createElement("canvas").getContext("2d"),s=118,r=10,i;this.font.load().then(n=>{document.fonts.add(n),console.log("Font loaded"),t.fillStyle="rgb(0, 0, 0)",t.font="14px myFont",t.fillText(e,0,10),i=new Uint32Array(t.getImageData(0,0,s,r).data.buffer);for(let a=0;a<i.length;a++)if(i[a]&4278190080){let h=a%s+46,o=a/s|0;this.txtDots.push({_y:h,x:o,y:h})}})}sinWave(){let e=32,s=10,r=.067,i=1;(()=>{this.frames++,i=this.frames/30;for(let a=0;a<e;a++){let h=Math.cos(a*r+i)*s/2+s/2,o=Math.sin(a*r+i)*s/2+s/2;this.canva.raws[Math.trunc(h)][Math.trunc(a)].className="active__grid",this.canva.raws[Math.trunc(a)][Math.trunc(o)].className="active__grid",this.canva.raws[Math.trunc(h+11)][Math.trunc(a)].className="active__grid",this.canva.raws[Math.trunc(a)][Math.trunc(o+11)].className="active__grid",this.canva.raws[Math.trunc(h+22)][Math.trunc(a)].className="active__grid",this.canva.raws[Math.trunc(a)][Math.trunc(o+22)].className="active__grid"}})()}render(){this.sinWave();let e=this.canva.size;for(let t of this.txtDots){let s=Math.trunc(t.y);t.x<e&&s<e&&t.x>=0&&s>=0&&(this.canva.raws[t.x+33][s].className=`active__${this.type}`),t.y>=t._y-160?t.y-=.25:t.y=t._y}}},g=f;var m=class{constructor(){this.size=32,this.raws=[...Array(44)]}getElem(e){return document.createElement(e)}setRaw(){let e=[];for(let t=1;t<=this.size;t++)e.push(this.getElem("span"));return e}getRaw(e,t){for(let s of t){let r=this.getElem("li");r.appendChild(s),e.appendChild(r)}return e}initBoard(){for(let e=0;e<this.raws.length;e++)this.raws[e]=this.setRaw();for(let e of this.raws){let t=this.getElem("ol");document.querySelector("ol").appendChild(this.getRaw(t,e))}}},_=m;var v=class{constructor(){this.FPS=1e3/30,this.canva=new _,this.player1=new c(this.canva,[-10,-0],[32,30]),this.player2=new c(this.canva,[20,-20],[0,40]),this.player3=new c(this.canva,[-20,30],[40,-10]),this.player4=new c(this.canva,[40,20],[-10,10]),this.banner=new g(this.canva),this.timeA=new Date,this.deltaTime,this.timeoutId}cancel(){clearTimeout(this.timeoutId)}clear(){let e=32*32;for(let s=0;s<e;s++){let r=this.spans[s];r.className="inActive"}let t=32*44;for(let s=e;s<t;s++){let r=this.spans[s];r.className="active__enemy"}}show(){this.banner.render(),this.player1.render(),this.player2.render(),this.player3.render(),this.player4.render()}loop(){this.clear(),this.show(),this.deltaTime=new Date-this.timeA,this.mainLoop()}mainLoop(){this.timeoutId=setTimeout(this.loop.bind(this),this.FPS-this.deltaTime)}init(){this.canva.initBoard(),this.spans=document.querySelectorAll("span"),this.player1.init("enemy",.16,!0),this.player2.init("player",.12,!1),this.player3.init("neutral",.25,!0),this.player4.init("bonus",.12,!1),this.banner.init("banner",.2),this.mainLoop()}},x=v;var M=new x;M.init();})();
